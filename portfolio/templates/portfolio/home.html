<!-- portfolio/templates/portfolio/home.html -->
{% extends "base.html" %} {% load static %} {% block title %}Home{% endblock %}
{% block content%}

<!-- Floating Quick Contact Panel -->
<div
  id="social-panel"
  class="fixed left-2 sm:left-3 top-3/4 z-50 flex flex-col items-center space-y-3 bg-white/10 dark:bg-zinc-900/20 backdrop-blur-md border border-white/20 dark:border-zinc-700/30 p-2 sm:p-3 rounded-2xl shadow-2xl transition-all duration-500 hover:bg-white/20 dark:hover:bg-zinc-900/30"
>
  <!-- Toggle Button -->
  <button
    id="toggle-panel"
    class="text-xs font-bold px-2 sm:px-4 py-1 sm:py-2 rounded-xl bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105"
  >
    <span class="block text-xs sm:text-sm">Quick</span>
    <span class="block text-xs sm:text-sm">Contact</span>
  </button>

  <!-- Hidden Social Icons Panel -->
  <div
    id="icon-area"
    class="flex flex-col items-center space-y-3 opacity-0 max-h-0 overflow-hidden transition-all duration-700"
  >
    <!-- LinkedIn -->
    <a href="https://www.linkedin.com/in/umut-sarper-uzun" target="_blank" 
       class="group p-2 rounded-xl bg-white/10 dark:bg-zinc-800/50 hover:bg-blue-500/20 dark:hover:bg-blue-500/20 transition-all duration-300 transform hover:scale-110">
      <img src="{% static 'icons/linkedin.svg' %}" alt="LinkedIn"
        class="w-5 h-5 object-contain group-hover:brightness-125 transition-all duration-300" />
    </a>

    <!-- GitHub -->
    <a href="https://www.github.com/umutsarperuzun" target="_blank" 
       class="group p-2 rounded-xl bg-white/10 dark:bg-zinc-800/50 hover:bg-gray-500/20 dark:hover:bg-gray-500/20 transition-all duration-300 transform hover:scale-110">
      <img src="{% static 'icons/github.svg' %}" alt="GitHub"
        class="w-5 h-5 object-contain group-hover:brightness-125 transition-all duration-300" />
    </a>

    <!-- Instagram -->
    <a href="https://www.instagram.com/srpruzn" target="_blank" 
       class="group p-2 rounded-xl bg-white/10 dark:bg-zinc-800/50 hover:bg-pink-500/20 dark:hover:bg-pink-500/20 transition-all duration-300 transform hover:scale-110">
      <img src="{% static 'icons/instagram.svg' %}" alt="Instagram"
        class="w-5 h-5 object-contain group-hover:brightness-125 transition-all duration-300" />
    </a>

    <!-- Email -->
    <a href="mailto:sarperuzun1@gmail.com?subject=Let's%20Connect&body=Hello%20Sarper%2C%0AI%20visited%20your%20portfolio%20and%20wanted%20to%20reach%20out."
      target="_blank" 
      class="group p-2 rounded-xl bg-white/10 dark:bg-zinc-800/50 hover:bg-red-500/20 dark:hover:bg-red-500/20 transition-all duration-300 transform hover:scale-110">
      <img src="{% static 'icons/gmail.svg' %}" alt="Email"
        class="w-5 h-5 object-contain group-hover:brightness-125 transition-all duration-300" />
    </a>
  </div>
</div>

<section
  id="home"
  class="relative h-[50vh] sm:h-[60vh] md:h-[70vh] overflow-hidden scroll-mt-28 flex items-center pt-16 sm:pt-20 md:pt-24"
>

  <!-- 1. Arka plan ge√ßi≈üli efekt -->
  <div
    class="absolute inset-0 z-0 bg-gradient-to-r from-white via-gray-200 to-black bg-[length:200%] animate-slideBg dark:from-gray-900 dark:via-gray-800 dark:to-black"
  ></div>

  <!-- 2. Kayan g√∂rseller -->
  <div class="absolute inset-0 z-10 overflow-hidden pointer-events-none">
    <div class="fade-mask absolute inset-0 z-10"></div>

    <div class="relative w-full h-full">
      <div
        class="slider-track flex animate-marquee h-full items-center w-[300%]"
      >
        {% for img in slider_images %}
        <img
          src="{% static img %}"
          alt="Slider Image"
          class="h-[90%] w-auto min-w-[700px] sm:min-w-[800px] object-contain opacity-20 grayscale contrast-75 dark:opacity-30 dark:grayscale-0 dark:contrast-100"
        />
        {% endfor %}
      </div>
    </div>
  </div>

  <!-- 3. Decode yazƒ±sƒ± (√ºst katman) -->
  <div class="relative z-30 w-full text-left px-4 sm:px-6 md:px-16">
    <div class="max-w-4xl">
      <h1
        class="text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-bold text-gray-900 dark:text-gray-100 mb-4 break-words"
      >
        <span id="decoding-title">Hi, I'm Sarper Uzun</span>
      </h1>
      
      <div class="space-y-2 sm:space-y-3 text-base sm:text-lg md:text-xl lg:text-2xl text-gray-700 dark:text-gray-300">
        <p class="opacity-0 break-words" id="subtitle-1">Junior Full-Stack Developer & AI Enthusiast</p>
        <p class="opacity-0 break-words" id="subtitle-2">Building modern web applications with React, Python & Node.js</p>
        <p class="opacity-0 break-words" id="subtitle-3">5+ Projects ‚Ä¢ 2+ Years Experience ‚Ä¢ Available for Work</p>
      </div>
      
      <div class="mt-4 sm:mt-6 flex flex-wrap gap-2 sm:gap-3 opacity-0" id="tech-badges">
        <span class="px-2 sm:px-3 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300 rounded-full text-xs sm:text-sm font-medium">React</span>
        <span class="px-2 sm:px-3 py-1 bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300 rounded-full text-xs sm:text-sm font-medium">Python</span>
        <span class="px-2 sm:px-3 py-1 bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-300 rounded-full text-xs sm:text-sm font-medium">Node.js</span>
        <span class="px-2 sm:px-3 py-1 bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-300 rounded-full text-xs sm:text-sm font-medium">JavaScript</span>
        <span class="px-2 sm:px-3 py-1 bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300 rounded-full text-xs sm:text-sm font-medium">Django</span>
        <span class="px-2 sm:px-3 py-1 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-800 dark:text-indigo-300 rounded-full text-xs sm:text-sm font-medium">MongoDB</span>
      </div>
    </div>
  </div>
</section>


<section
  id="about"
  class="relative min-h-screen bg-gray-50 dark:bg-gray-900 py-20 scroll-mt-28 pt-24 sm:pt-28 md:pt-32"
>
  <!-- Arka plan yƒ±ldƒ±zlar -->
  <canvas id="about-stars" class="absolute inset-0 w-full h-full z-0 pointer-events-none"></canvas>
  
  <h2 id="about-title" class="text-3xl font-bold text-center text-gray-900 dark:text-white opacity-0 transform scale-50 transition-all duration-1500 relative z-10">
    About Me
  </h2>

  <div class="mt-8 sm:mt-12 grid grid-cols-1 lg:grid-cols-2 gap-6 sm:gap-8 lg:gap-10 w-full px-4 sm:px-8 lg:px-16 relative z-10">
    <!-- Sol: Yazƒ± -->
    <div id="about-text" class="text-center lg:text-left max-w-xl mx-auto lg:mx-0 opacity-0 transform translate-x-[-100px] transition-all duration-1500">
      <h3 class="text-xl sm:text-2xl font-bold text-gray-800 dark:text-white mb-3 sm:mb-4">
        Who am I?
      </h3>
      <p class="text-sm sm:text-base text-gray-700 dark:text-gray-300 leading-relaxed">
        Hi, I'm Umut Sarper Uzun ‚Äî a junior software developer who enjoys turning
        real problems into simple, working products. I craft clean UIs with JavaScript/React
        and Tailwind, and build dependable backends with Python (Django/Flask) or Node.js/Express,
        using REST APIs and MySQL. I care about clarity, performance, and shipping in small, frequent
        iterations; Git/GitHub keeps me tidy, while Docker and n8n help me automate and scale. With 
        an MSc in Computer Science (Distinction), I'm always learning and I like teams where 
        straightforward communication and delivering value matter more than buzzwords.
      </p>
    </div>

    <!-- Saƒü: Yetenekler -->
    <div
      id="skills-section"
      class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 lg:gap-8 opacity-0 transform translate-x-[100px] transition-all duration-1500"
    >
      <!-- Backend -->
      <div class="space-y-3 sm:space-y-4">
        <h4 class="text-lg sm:text-xl font-semibold text-gray-700 dark:text-white">
          Backend
        </h4>
        <!-- Python -->
        {% include "portfolio/components/skill_item.html" with icon="icons/python.svg" name="Python" percentage="88" color="blue" %}
        <!-- Flask -->
         {% include "portfolio/components/skill_item.html" with icon="icons/flask.svg" name="Flask" percentage="82" color="emerald" %}
        <!-- MySQL -->
        {% include "portfolio/components/skill_item.html" with icon="icons/mysql.svg" name="MySQL" percentage="80" color="emerald" %}
        <!-- Node.js -->
        {% include "portfolio/components/skill_item.html" with icon="icons/node.svg" name="Node.js (Express.js)" percentage="78" color="emerald" %}
        <!-- Django -->
        {% include "portfolio/components/skill_item.html" with icon="icons/django.svg" name="Django" percentage="72" color="emerald" %}
      </div>
      <!-- Frontend -->
      <div class="space-y-3 sm:space-y-4">
        <h4 class="text-lg sm:text-xl font-semibold text-gray-700 dark:text-white">Frontend</h4>
        <!-- JavaScript -->
        {% include "portfolio/components/skill_item.html" with icon="icons/javascript.svg" name="JavaScript" percentage="85" color="yellow" %}
        <!-- React -->
        {% include "portfolio/components/skill_item.html" with icon="icons/react.svg" name="React" percentage="75" color="sky" %}
        <!-- Tailwind CSS -->
        {% include "portfolio/components/skill_item.html" with icon="icons/css.svg" name="CSS / Tailwind CSS" percentage="78" color="cyan" %}
        <!-- HTML -->
        {% include "portfolio/components/skill_item.html" with icon="icons/html.svg" name="HTML5" percentage="80" color="cyan" %}
      </div>
      <!-- Tools & Others -->
      <div class="space-y-3 sm:space-y-4">
        <h4 class="text-lg sm:text-xl font-semibold text-gray-700 dark:text-white">Tools & Others</h4>
        <!-- Git & GitHub -->
        {% include "portfolio/components/skill_item.html" with icon="icons/git.svg" name="Git & GitHub" percentage="85" color="orange" %}
        <!-- Docker -->
        {% include "portfolio/components/skill_item.html" with icon="icons/docker.svg" name="Docker" percentage="58" color="blue" %}
        <!-- Postman -->
        {% include "portfolio/components/skill_item.html" with icon="icons/postman.svg" name="Postman" percentage="80" color="orange" %}
        <!-- n8n -->
        {% include "portfolio/components/skill_item.html" with icon="icons/n8n.svg" name="n8n" percentage="74" color="orange" %}
      </div>
    </div>
  </div>
</section>

<section
  id="projects"
  class="relative bg-gray-50 dark:bg-gray-900 scroll-mt-28 pt-24 sm:pt-28 md:pt-32 pb-15"
>

  <!-- Arka plan yƒ±ldƒ±zlar -->
  <canvas id="star-canvas" class="absolute inset-0 w-full h-full z-0 pointer-events-none"></canvas>

  <!-- Explore Projects Alanƒ± -->
<div
  id="project-trigger"
  class="flex justify-center items-center transition-all duration-700 relative z-10"
>



    <div
      id="main-project-card"
      class="bg-white dark:bg-zinc-800 shadow-lg rounded-2xl px-12 py-20 text-center text-3xl font-bold text-gray-900 dark:text-white transition-transform duration-500 cursor-pointer hover:scale-105 hover:shadow-2xl hover:bg-gradient-to-r hover:from-indigo-500 hover:to-purple-500 dark:hover:brightness-110"
    >
      üöÄ Explore Projects
    </div>
  </div>

  <!-- Ba≈ülƒ±k -->
  <h2 id="project-heading" class="text-3xl font-bold text-center text-gray-900 dark:text-white opacity-0 transition-opacity duration-700 mb-2 md:mb-8">
    Projects
  </h2>

  <!-- Kartlar -->
  <div class="max-w-7xl mx-auto">
    <div
  id="project-fanout"
  class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4 sm:gap-6 px-4 sm:px-6 lg:px-8"
>

<div class="project-card bg-gradient-to-br from-blue-500 to-purple-600 dark:from-blue-600 dark:to-purple-700 shadow-xl hover:shadow-2xl transition-all duration-300"
     data-title="Full-Stack Newsletter Automation Platform"
     data-description="Built a full-stack SaaS platform for automated newsletter creation and delivery, serving content creators and marketing teams"
     data-cover="{% static 'images/nl-mainpage.png' %}"
     data-images="{% static 'images/nl-mainpage.png' %},{% static 'images/nl-dashboard.png' %},{% static 'images/nl-editor.png' %},{% static 'images/nl-popup forms.png' %},{% static 'images/nl-subscribers.png' %},{% static 'images/nl-blogs.png' %},{% static 'images/nl-analiytics.png' %}"
     data-tags="React 18,Next.js 14,Node.js,Express,TypeScript,PostgreSQL,Tailwind CSS,Stripe"
     data-live="https://thenewsletterly.com/"
     data-repo="#"
     data-features="Advanced content management with smart content generation and summarization|Interactive drag & drop editor with responsive templates|Real-time preview and advanced text editing capabilities|Subscriber segmentation and A/B testing features|GDPR-compliant preference management system|Comprehensive analytics dashboard with WebSocket integration|Usage-based billing system via Stripe integration|Multilingual and auto-categorized newsletter support|Scalable backend with RESTful APIs and secure authentication">
  <div class="project-card-inner relative z-10">
    <div class="flex items-center justify-center mb-3">
      <div class="w-12 h-12 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm">
        <span class="text-2xl">üìß</span>
      </div>
    </div>
    <h3 class="text-lg font-bold text-white mb-2">Newsletterly</h3>
    <p class="text-xs text-white/90 leading-relaxed">AI-driven newsletters auto curation, AI summaries, rich media templates</p>
    <div class="mt-3 flex flex-wrap gap-1">
      <span class="px-2 py-1 bg-white/20 text-white text-xs rounded-full">React</span>
      <span class="px-2 py-1 bg-white/20 text-white text-xs rounded-full">Node.js</span>
      <span class="px-2 py-1 bg-white/20 text-white text-xs rounded-full">AI</span>
    </div>
  </div>
  <button class="card-close">‚úñ</button>
</div>




<div class="project-card bg-gradient-to-br from-green-500 to-teal-600 dark:from-green-600 dark:to-teal-700 shadow-xl hover:shadow-2xl transition-all duration-300"
     data-title="AI-Powered Chatbot for Fleet Management"
     data-description="Built a Flask backend integrating OAuth2, JWT, and OneDrive API for secure document automation"
     data-cover="{% static 'images/cb-login.png' %}"
     data-video="{% static 'images/demo_video_cut.mp4' %}"
     data-tags="Python,Flask,SQLAlchemy,MySQL,PostgreSQL,NLP,OneDrive API,CheckedSafe API,JWT,Docker"
     data-live="#"
     data-repo="https://github.com/umutsarperuzun/chatbot_project"
     data-features="Flask backend with OAuth2 and JWT authentication integration|Automated OneDrive file management with upload, update, and folder structuring|Real-time fleet report handling via CheckedSafe API integration|SQLAlchemy ORM for efficient database operations|Sentiment analysis and NLP using spaCy for improved chatbot interactions|Secure document automation and fleet documentation streamlining|Docker containerization for scalable deployment|Multi-database support with MySQL and PostgreSQL|Advanced API integrations for seamless workflow automation">
  <div class="project-card-inner relative z-10">
    <div class="flex items-center justify-center mb-3">
      <div class="w-12 h-12 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm">
        <span class="text-2xl">ü§ñ</span>
      </div>
    </div>
    <h3 class="text-lg font-bold text-white mb-2">AI Chatbot</h3>
    <p class="text-xs text-white/90 leading-relaxed">Automates fleet documents & reports via Flask backend with OneDrive + CheckedSafe API</p>
    <div class="mt-3 flex flex-wrap gap-1">
      <span class="px-2 py-1 bg-white/20 text-white text-xs rounded-full">Flask</span>
      <span class="px-2 py-1 bg-white/20 text-white text-xs rounded-full">Python</span>
      <span class="px-2 py-1 bg-white/20 text-white text-xs rounded-full">AI</span>
    </div>
  </div>
  <button class="card-close">‚úñ</button>
</div>



<div class="project-card bg-gradient-to-br from-orange-500 to-red-600 dark:from-orange-600 dark:to-red-700 shadow-xl hover:shadow-2xl transition-all duration-300"
     data-title="Point of Sale (POS) System"
     data-description="Built full-stack POS system with real-time sales tracking, role-based access, and payment integration"
     data-cover="{% static 'images/pos-anasayfa.png' %}"
     data-images="{% static 'images/pos-anasayfa.png' %},{% static 'images/pos-login.png' %},{% static 'images/pos-add product.png' %},{% static 'images/pos-cart.png' %},{% static 'images/pos-customers.png' %},{% static 'images/pos-invoice.png' %},{% static 'images/pos-invoice2.png' %}"
     data-tags="React.js,Node.js,Express,MongoDB,Ant Design,Bootstrap,PostgreSQL,JWT,Redux"
     data-live="https://sarper-pos-application.onrender.com/"
     data-repo="https://github.com/umutsarperuzun/pos-application"
     data-features="Full-stack POS system with real-time sales tracking and inventory management|Role-based access control for different user permissions|Payment integration with secure transaction processing|Dashboard UI designed with Ant Design for modern user experience|Redux Toolkit implementation for efficient state management|Backend database optimization for sales and inventory operations|Comprehensive reporting and analytics tools for business insights|Transaction summaries and sales performance tracking|JWT authentication for secure user sessions|MongoDB and PostgreSQL database integration for scalable data storage">
  <div class="project-card-inner relative z-10">
    <div class="flex items-center justify-center mb-3">
      <div class="w-12 h-12 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm">
        <span class="text-2xl">üí≥</span>
      </div>
    </div>
    <h3 class="text-lg font-bold text-white mb-2">POS App</h3>
    <p class="text-xs text-white/90 leading-relaxed">Real-time sales, inventory, and reporting with role-based access</p>
    <div class="mt-3 flex flex-wrap gap-1">
      <span class="px-2 py-1 bg-white/20 text-white text-xs rounded-full">React</span>
      <span class="px-2 py-1 bg-white/20 text-white text-xs rounded-full">Node.js</span>
      <span class="px-2 py-1 bg-white/20 text-white text-xs rounded-full">MongoDB</span>
    </div>
  </div>
  <button class="card-close">‚úñ</button>
</div>



<div class="project-card bg-gradient-to-br from-purple-500 to-pink-600 dark:from-purple-600 dark:to-pink-700 shadow-xl hover:shadow-2xl transition-all duration-300"
     data-title="End-to-End Blog Automation Workflow"
     data-description="Automated weekly blog lifecycle: topic research ‚Üí draft generation ‚Üí feedback handling ‚Üí approval ‚Üí image enrichment ‚Üí formatting ‚Üí publishing"
     data-cover="{% static 'images/bg-1.png' %}"
     data-images="{% static 'images/bg-1.png' %},{% static 'images/bg-2.png' %},{% static 'images/bg-3.png' %},{% static 'images/bg-4.png' %},{% static 'images/bg-5.png' %},{% static 'images/bg-6.png' %}"
     data-tags="n8n,OpenAI,Slack,SerpAPI,Pexels API,Google Sheets,Whisper,CMS"
     data-live="#"
     data-repo="https://github.com/umutsarperuzun/my-n8n-workflows"
     data-features="End-to-end blog workflow automation from topic research to publishing|Slack-driven collaboration for editors and content leads|Intelligent content creation with OpenAI GPT for topics and drafts|SerpAPI integration for fresh, real-world trend analysis|Multi-modal feedback handling with text and audio support|Whisper AI transcription for audio feedback processing|Automated image enrichment via Pexels API with HD images|Google Sheets integration for metadata storage and traceability|Automated publishing to CMS with formatted HTML and layout rules|n8n credentials vault for secure OAuth and Bearer token management">
  <div class="project-card-inner relative z-10">
    <div class="flex items-center justify-center mb-3">
      <div class="w-12 h-12 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm">
        <span class="text-2xl">üìù</span>
      </div>
    </div>
    <h3 class="text-lg font-bold text-white mb-2">n8n Blog Generator</h3>
    <p class="text-xs text-white/90 leading-relaxed">Weekly topics ‚Üí AI drafts ‚Üí approval ‚Üí auto-publish, orchestrated in n8n</p>
    <div class="mt-3 flex flex-wrap gap-1">
      <span class="px-2 py-1 bg-white/20 text-white text-xs rounded-full">n8n</span>
      <span class="px-2 py-1 bg-white/20 text-white text-xs rounded-full">AI</span>
      <span class="px-2 py-1 bg-white/20 text-white text-xs rounded-full">Automation</span>
    </div>
  </div>
  <button class="card-close">‚úñ</button>
</div>



<div class="project-card bg-gradient-to-br from-indigo-500 to-blue-600 dark:from-indigo-600 dark:to-blue-700 shadow-xl hover:shadow-2xl transition-all duration-300"
     data-title="E-Commerce Platform for Sneaker Sales"
     data-description="Created a responsive e-commerce platform with user authentication, product filtering, and secure checkout"
     data-cover="{% static 'images/sneaker.png' %}"
     data-images="{% static 'images/sneaker.png' %}"
     data-tags="React.js,Tailwind CSS,Redux,REST APIs,Node.js,Express,MongoDB"
     data-live="#"
     data-repo="https://github.com/umutsarperuzun/Sneaker_Website"
     data-features="Responsive e-commerce platform with seamless mobile and desktop experience|User authentication system with secure login and registration|Advanced product filtering and search functionality|Secure checkout process with payment integration|RESTful API integration for backend communication|Context API implementation for efficient state management|Tailwind CSS styling for modern and responsive UI design|Order management system for tracking and processing orders|Customer account features for enhanced user experience|MongoDB database integration for scalable data storage">
  <div class="project-card-inner relative z-10">
    <div class="flex items-center justify-center mb-3">
      <div class="w-12 h-12 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm">
        <span class="text-2xl">üëü</span>
      </div>
    </div>
    <h3 class="text-lg font-bold text-white mb-2">E-Commerce Platform</h3>
    <p class="text-xs text-white/90 leading-relaxed">Auth, product filters, secure checkout, and order management</p>
    <div class="mt-3 flex flex-wrap gap-1">
      <span class="px-2 py-1 bg-white/20 text-white text-xs rounded-full">React</span>
      <span class="px-2 py-1 bg-white/20 text-white text-xs rounded-full">Node.js</span>
      <span class="px-2 py-1 bg-white/20 text-white text-xs rounded-full">MongoDB</span>
    </div>
  </div>
  <button class="card-close">‚úñ</button>
</div>


    </div>
  </div>
  <!-- Blur Arkaplan -->
<div id="overlay-blur" class="fixed inset-0 bg-black/30 backdrop-blur-sm z-40 hidden"></div>

<!-- Single reusable Project Modal -->
<div id="project-modal" class="fixed inset-0 z-50 hidden items-center justify-center p-2 sm:p-4" style="display: none !important;">
  <div id="project-modal-overlay" class="absolute inset-0 bg-black/50 backdrop-blur-sm"></div>
  <div class="relative bg-white dark:bg-zinc-900 rounded-xl sm:rounded-2xl shadow-2xl max-w-xs sm:max-w-2xl lg:max-w-5xl xl:max-w-6xl w-full max-h-[90vh] overflow-hidden">
    <button id="project-modal-close" class="absolute top-2 right-2 sm:top-3 sm:right-3 text-white bg-zinc-800/70 hover:bg-zinc-700 rounded-full w-6 h-6 sm:w-8 sm:h-8 flex items-center justify-center text-sm sm:text-base">‚úñ</button>
    <div class="p-3 sm:p-4 space-y-3 sm:space-y-4 h-full overflow-y-auto scrollbar-hide">
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6">
        <div class="relative">
          <!-- Video Container (for AI Chatbot) -->
          <div id="pm-video-container" class="hidden">
            <video id="pm-video" class="w-full h-48 sm:h-56 md:h-64 lg:h-72 object-contain rounded-lg sm:rounded-xl bg-gray-100 dark:bg-gray-800" controls>
              <source src="" type="video/mp4">
              Your browser does not support the video tag.
            </video>
          </div>
          
          <!-- Image Gallery Container -->
          <div id="pm-gallery-container" class="relative overflow-hidden">
            <img id="pm-cover" src="" alt="Cover" class="w-full h-48 sm:h-56 md:h-64 lg:h-72 object-contain rounded-lg sm:rounded-xl bg-gray-100 dark:bg-gray-800" />
            
            <!-- Navigation Arrows -->
            <button id="pm-prev" class="absolute left-1 sm:left-2 top-1/2 transform -translate-y-1/2 bg-gradient-to-r from-purple-600/40 to-blue-600/40 hover:from-purple-700/60 hover:to-blue-700/60 text-white/80 rounded-full w-8 h-8 sm:w-10 sm:h-10 flex items-center justify-center transition-all duration-300 z-30 shadow-lg hover:shadow-xl hover:scale-110 backdrop-blur-sm border border-white/10">
              <svg class="w-4 h-4 sm:w-5 sm:h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
              </svg>
            </button>
            <button id="pm-next" class="absolute right-1 sm:right-2 top-1/2 transform -translate-y-1/2 bg-gradient-to-r from-purple-600/40 to-blue-600/40 hover:from-purple-700/60 hover:to-blue-700/60 text-white/80 rounded-full w-8 h-8 sm:w-10 sm:h-10 flex items-center justify-center transition-all duration-300 z-30 shadow-lg hover:shadow-xl hover:scale-110 backdrop-blur-sm border border-white/10">
              <svg class="w-4 h-4 sm:w-5 sm:h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
              </svg>
            </button>
            
            <!-- Image Counter -->
            <div id="pm-counter" class="absolute bottom-2 right-2 sm:bottom-3 sm:right-3 bg-gradient-to-r from-purple-600/40 to-blue-600/40 backdrop-blur-sm text-white/80 text-xs px-2 py-1 sm:px-3 sm:py-1.5 rounded-full border border-white/10 shadow-lg z-40 transition-all duration-300">
              <span id="pm-current">1</span> / <span id="pm-total">1</span>
            </div>
          </div>
        </div>
        <div class="space-y-1 sm:space-y-2">
          <h3 id="pm-title" class="text-sm sm:text-base font-semibold text-gray-900 dark:text-white"></h3>
          <p id="pm-desc" class="text-xs text-gray-700 dark:text-gray-300"></p>
          <div>
            <h4 class="text-xs font-semibold text-gray-800 dark:text-gray-200">Stack</h4>
            <div id="pm-tags" class="flex flex-wrap gap-1 mt-1"></div>
          </div>
        </div>
      </div>
      <div>
        <h4 class="text-xs font-semibold text-gray-800 dark:text-gray-200">Overview</h4>
        <ul id="pm-features" class="mt-1 list-disc list-inside text-xs text-gray-700 dark:text-gray-300 space-y-0.5"></ul>
      </div>
      <div>
        <h4 class="text-xs font-semibold text-gray-800 dark:text-gray-200">Links</h4>
        <div id="pm-actions" class="flex flex-wrap gap-1 mt-1"></div>
      </div>
    </div>
  </div>
</div>


</section>


<section
  id="blog"
  class="relative bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-white pt-24 sm:pt-28 md:pt-32 pb-8 scroll-mt-28"
>
  <!-- Arka plan yƒ±ldƒ±zlar -->
  <canvas id="blog-stars" class="absolute inset-0 w-full h-full z-0 pointer-events-none"></canvas>

  <h2 class="text-3xl font-bold text-center mb-6 relative z-10">Blog</h2>

  <div class="mx-auto bg-black text-[#00FF00] font-mono w-[95%] sm:w-[90%] max-w-2xl rounded-lg shadow-2xl border border-gray-700 relative z-10">
    
    <!-- Fake Top Bar -->
    <div class="bg-[#1e1e1e] h-8 rounded-t-lg px-4 flex items-center justify-between">
      <span class="text-gray-400 text-xs">Command Prompt</span>
      <div class="flex space-x-2">
        <span class="w-3 h-3 bg-red-500 rounded-full"></span>
        <span class="w-3 h-3 bg-yellow-500 rounded-full"></span>
        <span class="w-3 h-3 bg-green-500 rounded-full"></span>
      </div>
    </div>

    <!-- Terminal Content -->
    <div class="p-3 sm:p-4 text-xs sm:text-sm leading-relaxed h-48 sm:h-64 md:h-72 overflow-y-auto" id="terminal-typing-container">
      <div id="terminal-typing"></div>
      <span class="blink">‚ñà</span>
    </div>
    
  </div>
</section>

<section
  id="contact"
  class="relative h-auto bg-gray-50 dark:bg-gray-900 py-20 transition-colors duration-500 scroll-mt-28 pt-24 sm:pt-28 md:pt-32"
>
  <!-- Arka plan yƒ±ldƒ±zlar -->
  <canvas id="contact-stars" class="absolute inset-0 w-full h-full z-0 pointer-events-none"></canvas>
  
  <div
    data-aos="fade-up"
    data-aos-duration="1200"
    data-aos-easing="ease-out-cubic"
    class="bg-transparent relative z-10"
  >
    <h2 class="text-3xl font-bold text-center mb-10 dark:text-white relative z-10">Get in Touch</h2>

    <!-- Django messages -->
    {% if messages %}
      <div class="max-w-4xl mx-auto px-4 mb-6 relative z-50">
        {% for message in messages %}
          <div class="rounded-lg px-4 py-3 text-sm shadow-lg ring-1 ring-white/10 {{ message.tags|default:'' }} {% if message.tags == 'success' %}bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-white{% elif message.tags == 'error' %}bg-red-100 text-red-800 dark:bg-red-900/40 dark:text-white{% else %}bg-gray-100 text-gray-800 dark:bg-zinc-800/60 dark:text-white{% endif %}">
            {{ message }}
          </div>
        {% endfor %}
      </div>
    {% endif %}

    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
      <!-- Gradient ring + glass card -->
      <div class="gradient-ring rounded-xl sm:rounded-2xl p-0.5">
        <div class="glass-card rounded-xl sm:rounded-2xl">
          <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 sm:gap-8 p-4 sm:p-6 lg:p-8">

            <!-- Left: Copy / Socials -->
            <div class="flex flex-col justify-center space-y-4 sm:space-y-5">
              <h3 class="text-xl sm:text-2xl lg:text-3xl font-semibold text-gray-900 dark:text-white leading-tight">
                Let's build something meaningful together
              </h3>
              <p class="text-sm sm:text-base text-gray-700 dark:text-gray-300">
                Got a project or an idea? I'd love to hear about it. Drop a line and I'll get back soon.
              </p>

              <div class="flex items-center gap-3 sm:gap-4">
                <a href="https://www.linkedin.com/in/umut-sarper-uzun" target="_blank" class="dark:invert dark:brightness-125">
                  <img src="{% static 'icons/linkedin.svg' %}" alt="LinkedIn" class="w-5 h-5 sm:w-6 sm:h-6" />
                </a>
                <a href="https://www.github.com/umutsarperuzun" target="_blank" class="dark:invert dark:brightness-125">
                  <img src="{% static 'icons/github.svg' %}" alt="GitHub" class="w-5 h-5 sm:w-6 sm:h-6" />
                </a>
                <a href="mailto:sarperuzun1@gmail.com" class="dark:invert dark:brightness-125">
                  <img src="{% static 'icons/gmail.svg' %}" alt="Email" class="w-5 h-5 sm:w-6 sm:h-6" />
                </a>
              </div>
            </div>

            <!-- Right: Contact form (backend wired) -->
            <div>
              <form class="space-y-3 sm:space-y-4" method="post" action="{% url 'contact_submit' %}">
                {% csrf_token %}
                <div>
                  <label class="block text-xs sm:text-sm mb-1 text-gray-700 dark:text-gray-300">Name</label>
                  <input name="name" type="text" placeholder="Your name" class="w-full rounded-lg bg-white/70 dark:bg-zinc-800/70 border border-gray-300 dark:border-zinc-700 px-3 sm:px-4 py-2 sm:py-3 text-sm sm:text-base contact-input focus:outline-none" required />
                </div>
                <div>
                  <label class="block text-xs sm:text-sm mb-1 text-gray-700 dark:text-gray-300">Email</label>
                  <input name="email" type="email" placeholder="name@example.com" class="w-full rounded-lg bg-white/70 dark:bg-zinc-800/70 border border-gray-300 dark:border-zinc-700 px-3 sm:px-4 py-2 sm:py-3 text-sm sm:text-base contact-input focus:outline-none" required />
                </div>
                <div>
                  <label class="block text-xs sm:text-sm mb-1 text-gray-700 dark:text-gray-300">Message</label>
                  <textarea name="message" rows="4" placeholder="Tell me a bit about your project‚Ä¶" class="w-full rounded-lg bg-white/70 dark:bg-zinc-800/70 border border-gray-300 dark:border-zinc-700 px-3 sm:px-4 py-2 sm:py-3 text-sm sm:text-base contact-input focus:outline-none" required></textarea>
                </div>
                <button type="submit" class="shine-btn relative inline-flex items-center justify-center w-full lg:w-auto px-4 sm:px-6 py-2 sm:py-3 rounded-lg text-sm sm:text-base font-medium text-white bg-gradient-to-r from-sky-400 via-indigo-500 to-fuchsia-500 hover:from-sky-500 hover:via-indigo-600 hover:to-fuchsia-600 transition">
                  Send Message
                </button>
              </form>
            </div>

          </div>
        </div>
      </div>
    </div>

  </div>
</section>

<script>

  // 1. Navbar offset'li scroll davranƒ±≈üƒ±
function setupSmoothScrollWithOffset() {
  const navbar = document.querySelector("nav");
  const navbarHeight = navbar ? navbar.offsetHeight : 80; // Default 80px if navbar not found
  const links = document.querySelectorAll("a.scroll-link");

  links.forEach(link => {
    link.addEventListener("click", (e) => {
      e.preventDefault();
      const targetId = link.getAttribute("href").substring(1);
      const targetEl = document.getElementById(targetId);

      if (targetEl) {
        const offsetTop = targetEl.offsetTop;
        window.scrollTo({
          top: offsetTop - navbarHeight - 20, // Extra 20px buffer
          behavior: "smooth"
        });
      }
    });
  });
}

  // 2. Quick Contact Panel (sol taraftaki a√ßƒ±lƒ±r panel)
function setupQuickContactPanel() {
  const contactToggleBtn = document.getElementById("toggle-panel");
  const iconSection = document.getElementById("icon-area");
  if (!contactToggleBtn || !iconSection) return;
  let panelOpen = false;

  contactToggleBtn.addEventListener("click", () => {
    iconSection.classList.toggle("opacity-0");
    iconSection.classList.toggle("max-h-0");
    iconSection.classList.toggle("max-h-[500px]");
    panelOpen = !panelOpen;
  });

  window.addEventListener("scroll", () => {
    if (panelOpen) {
      iconSection.classList.add("opacity-0", "max-h-0");
      iconSection.classList.remove("max-h-[500px]");
      panelOpen = false;
    }
  });
}

// 3. Decode yazƒ± animasyonu (hero ba≈ülƒ±ƒüƒ±)
function decodeEffect() {
  const display = document.getElementById("decoding-title");
  if (!display) return;
  const targetText = "Hi, I'm Sarper Uzun";
  const characters = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz1234567890!@#$%^&*()-_=+";
  let iterations = 0;

  function animate() {
    const length = targetText.length;
    let output = "";

    for (let i = 0; i < length; i++) {
      output += i < iterations ? targetText[i] : characters[Math.floor(Math.random() * characters.length)];
    }

    display.textContent = output;

    if (iterations <= length) {
      iterations++;
      setTimeout(animate, 60);
    } else {
      // Ana ba≈ülƒ±k tamamlandƒ±ktan sonra alt yazƒ±larƒ± g√∂ster
      showSubtitles();
      
      // 3 saniye bekle ve animasyonu tekrar ba≈ülat
      setTimeout(() => {
        iterations = 0;
        animate();
      }, 3000);
    }
  }

  let subtitlesShown = false;
  
  function showSubtitles() {
    if (subtitlesShown) return; // Sadece bir kez g√∂ster
    subtitlesShown = true;
    
    const subtitles = ['subtitle-1', 'subtitle-2', 'subtitle-3'];
    const techBadges = document.getElementById('tech-badges');
    
    subtitles.forEach((id, index) => {
      setTimeout(() => {
        const element = document.getElementById(id);
        if (element) {
          element.style.transition = 'opacity 0.8s ease-in-out';
          element.style.opacity = '1';
        }
      }, index * 500);
    });
    
    // Tech badges'leri g√∂ster
    setTimeout(() => {
      if (techBadges) {
        techBadges.style.transition = 'opacity 0.8s ease-in-out';
        techBadges.style.opacity = '1';
      }
    }, 1500);
  }

  animate();
}

// 4. Projects & Blog scroll reveal animasyonlarƒ±
function setupScrollRevealAnimations() {
  const sections = document.querySelectorAll(".reveal-manual");
  let lastScrollY = window.scrollY;

  const observer = new IntersectionObserver((entries) => {
    entries.forEach((entry) => {
      const currentScrollY = window.scrollY;
      const scrollingDown = currentScrollY > lastScrollY;

      if (entry.isIntersecting && scrollingDown) {
        const sectionName = entry.target.dataset.section;
        if (sectionName === "projects") entry.target.classList.add("animate-slide-in");
        else if (sectionName === "blog") entry.target.classList.add("animate-slide-left");
      }

      if (!entry.isIntersecting) {
        entry.target.classList.remove("animate-slide-in", "animate-slide-left");
      }

      lastScrollY = currentScrollY;
    });
  }, { threshold: 0.05 });

  sections.forEach(section => observer.observe(section));
}

// 5. Skill bar animasyonlarƒ±
function setupSkillAnimation() {
  const skillSection = document.getElementById("skills-section");
  const skillBars = document.querySelectorAll(".skill-bar");
  if (!skillSection || !skillBars.length) return;
  let animationStarted = false;

  function animateSkills() {
    skillBars.forEach(bar => {
      bar.style.transition = "none";
      bar.style.width = "0%";
    });

    setTimeout(() => {
      skillBars.forEach((bar, index) => {
        setTimeout(() => {
          const targetWidth = bar.getAttribute("data-width");
          bar.style.transition = "width 1.5s ease";
          bar.style.width = targetWidth;
        }, index * 150);
      });
    }, 50);
  }

  const observering = new IntersectionObserver((entries, observering) => {
    entries.forEach((entry) => {
      if (entry.isIntersecting && !animationStarted) {
        animationStarted = true;
        animateSkills();
        setInterval(() => animateSkills(), 10000);
        observering.unobserve(entry.target);
      }
    });
  }, { threshold: 0.3 });

  observering.observe(skillSection);
}

// 6. Skill ikonlarƒ±na scroll ile spin animasyonu
function setupSkillIconAnimations() {
  const icons = document.querySelectorAll(".skill-icon");
  if (!icons.length) return;

  const iconObserver = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        const icon = entry.target;
        icon.classList.remove("animate-spin-once");
        void icon.offsetWidth;
        icon.classList.add("animate-spin-once");
      }
    });
  }, { threshold: 0.6 });

  icons.forEach(icon => iconObserver.observe(icon));
}

// 7. Proje kartƒ± fanout + scroll + tilt
function setupProjectCardFanout() {
  const trigger = document.getElementById("project-trigger");
  const mainCard = document.getElementById("main-project-card");
  const fanout = document.getElementById("project-fanout");
  const heading = document.getElementById("project-heading");
  const cards = document.querySelectorAll(".project-card");
  let opened = false;

  if (!mainCard || !trigger || !fanout || !heading) return;

  mainCard.addEventListener("click", () => {
    if (opened) return;

    const projectsEl = document.getElementById("projects");
    const navbar = document.querySelector("nav");
    const navbarHeight = navbar ? navbar.offsetHeight : 0;

    if (projectsEl) {
      const offsetTop = projectsEl.offsetTop;
      window.scrollTo({
        top: offsetTop - navbarHeight + 4,
        behavior: "smooth"
      });
    }

    trigger.classList.add('opacity-0', 'pointer-events-none', 'hidden');
    trigger.classList.remove('h-[300px]');
    heading.classList.remove('opacity-0');
    fanout.classList.add('active');

    cards.forEach((card, index) => {
      setTimeout(() => {
        card.classList.remove('hidden');
        card.classList.add('visible');
        card.style.opacity = "1";
        card.style.transform = "scale(1)";
      }, 150 * index);
    });

    activateTiltEffect();
    opened = true;
  });

  const obsrvr = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (!entry.isIntersecting && opened) {
        trigger.classList.remove('opacity-0', 'pointer-events-none', 'hidden');
        trigger.classList.add('h-[300px]');
        heading.classList.add('opacity-0');
        fanout.classList.add('opacity-0');
        fanout.classList.remove('active');
        cards.forEach(card => {
          card.classList.add('hidden');
          card.classList.remove('visible');
          card.style.opacity = "0";
          card.style.transform = "scale(0.9)";
        });
        opened = false;
      }
    });
  }, { threshold: 0.3 });

  const projectsEl = document.getElementById('projects');
  if (projectsEl) obsrvr.observe(projectsEl);
}

// 8. Kart b√ºy√ºtme & blur overlay sistemi
function setupProjectCardOverlay() { /* deprecated: kept empty to avoid duplicate handlers */ }

// New: Centralized modal for project details
function setupProjectModal() {
  const cards = document.querySelectorAll('.project-card');
  const modal = document.getElementById('project-modal');
  const modalOverlay = document.getElementById('project-modal-overlay');
  const modalClose = document.getElementById('project-modal-close');
  const pmCover = document.getElementById('pm-cover');
  const pmTitle = document.getElementById('pm-title');
  const pmDesc = document.getElementById('pm-desc');
  const pmTags = document.getElementById('pm-tags');
  const pmActions = document.getElementById('pm-actions');
  const pmFeatures = document.getElementById('pm-features');
  
  // Gallery elements
  const pmVideoContainer = document.getElementById('pm-video-container');
  const pmGalleryContainer = document.getElementById('pm-gallery-container');
  const pmVideo = document.getElementById('pm-video');
  const pmPrev = document.getElementById('pm-prev');
  const pmNext = document.getElementById('pm-next');
  const pmCurrent = document.getElementById('pm-current');
  const pmTotal = document.getElementById('pm-total');

  if (!cards.length || !modal) return;

  let currentImages = [];
  let currentImageIndex = 0;

  function openModal() {
    modal.classList.remove('hidden');
    modal.classList.add('show');
    modal.style.display = 'flex';
    document.body.style.overflow = 'hidden';
  }
  
  function closeModal() {
    modal.classList.add('hidden');
    modal.classList.remove('show');
    modal.style.display = 'none';
    document.body.style.overflow = '';
    pmCover.src = '';
    pmTitle.textContent = '';
    pmDesc.textContent = '';
    pmTags.innerHTML = '';
    pmActions.innerHTML = '';
    pmFeatures.innerHTML = '';
    
    // Reset image zoom - oklar ve saya√ß normal pozisyonlarƒ±nda kalƒ±r
    pmCover.classList.remove('zoomed');
    pmCover.style.transform = 'scale(1)';
    pmCover.style.zIndex = '1';
    pmGalleryContainer.style.overflow = 'hidden';
    
    // Reset video
    if (pmVideo) {
      pmVideo.pause();
      pmVideo.currentTime = 0;
    }
  }

  function showImage(index) {
    if (currentImages.length === 0) return;
    
    currentImageIndex = index;
    pmCover.src = currentImages[currentImageIndex];
    pmCurrent.textContent = currentImageIndex + 1;
    pmTotal.textContent = currentImages.length;
    
    // Show/hide navigation arrows
    pmPrev.style.display = currentImages.length > 1 ? 'flex' : 'none';
    pmNext.style.display = currentImages.length > 1 ? 'flex' : 'none';
  }

  function nextImage() {
    if (currentImages.length === 0) return;
    currentImageIndex = (currentImageIndex + 1) % currentImages.length;
    showImage(currentImageIndex);
  }

  function prevImage() {
    if (currentImages.length === 0) return;
    currentImageIndex = (currentImageIndex - 1 + currentImages.length) % currentImages.length;
    showImage(currentImageIndex);
  }

  // Image click to enlarge - DISABLED
  function enlargeImage() {
    // Zoom √∂zelliƒüi tamamen devre dƒ±≈üƒ±
    return;
  }

  cards.forEach(card => {
    card.addEventListener('click', (e) => {
      // Sadece g√∂r√ºn√ºr kartlara tƒ±klanabilsin
      if (!card.classList.contains('visible')) {
        return;
      }
      
      e.preventDefault();
      e.stopPropagation();
      const title = card.getAttribute('data-title') || '';
      const desc = card.getAttribute('data-description') || '';
      const cover = card.getAttribute('data-cover') || '';
      const video = card.getAttribute('data-video') || '';
      const images = card.getAttribute('data-images') || '';
      const tags = (card.getAttribute('data-tags') || '').split(',').map(t => t.trim()).filter(Boolean);
      const live = card.getAttribute('data-live');
      const repo = card.getAttribute('data-repo');
      const features = (card.getAttribute('data-features') || '').split('|').map(f => f.trim()).filter(Boolean);

      pmTitle.textContent = title;
      pmDesc.textContent = desc;

      // Handle video or images
      if (video && video !== '') {
        // Show video
        pmVideoContainer.classList.remove('hidden');
        pmGalleryContainer.classList.add('hidden');
        pmVideo.src = video;
      } else {
        // Show image gallery
        pmVideoContainer.classList.add('hidden');
        pmGalleryContainer.classList.remove('hidden');
        
        if (images && images !== '') {
          currentImages = images.split(',').map(img => img.trim()).filter(Boolean);
        } else {
          currentImages = [cover];
        }
        
        showImage(0);
      }

      pmTags.innerHTML = '';
      tags.forEach(t => {
        const span = document.createElement('span');
        span.className = 'chip';
        span.textContent = t;
        pmTags.appendChild(span);
      });

      pmFeatures.innerHTML = '';
      features.forEach(f => {
        const li = document.createElement('li');
        li.textContent = f;
        pmFeatures.appendChild(li);
      });

      pmActions.innerHTML = '';
      if (live && live !== '#') {
        const a = document.createElement('a');
        a.href = live; a.target = '_blank';
        a.className = 'project-btn'; a.textContent = 'Live';
        pmActions.appendChild(a);
      }
      if (repo && repo !== '#') {
        const a = document.createElement('a');
        a.href = repo; a.target = '_blank';
        a.className = 'project-btn'; a.textContent = 'Repo';
        pmActions.appendChild(a);
      }

      openModal();
    });
  });

  function shouldCloseOnWheel(e) {
    // Close modal if wheel happens outside modal content area (i.e., on overlay)
    const content = modal.querySelector('.relative.bg-white, .relative.bg-zinc-900');
    if (!content) return true;
    return !content.contains(e.target);
  }

  // Event listeners
  modal.addEventListener('click', (e) => {
    if (e.target === modal || e.target === modalOverlay) closeModal();
    
    // Exit zoom if clicking outside the image when zoomed
    if (pmCover && pmCover.classList.contains('zoomed')) {
      const img = pmCover;
      const container = pmGalleryContainer;
      const prevBtn = pmPrev;
      const nextBtn = pmNext;
      const counter = document.getElementById('pm-counter');
      
      // Check if click is outside the image and its controls
      if (e.target !== img && e.target !== prevBtn && e.target !== nextBtn && e.target !== counter) {
        // Also check if click is not within the image bounds
        const rect = img.getBoundingClientRect();
        const clickX = e.clientX;
        const clickY = e.clientY;
        
        if (clickX < rect.left || clickX > rect.right || clickY < rect.top || clickY > rect.bottom) {
          // Reset to normal
          img.classList.remove('zoomed');
          img.style.transform = 'scale(1)';
          img.style.transformOrigin = 'center center';
          img.style.zIndex = '1';
          container.style.overflow = 'hidden';
          
          // Reset arrow and counter positions
          prevBtn.style.left = '8px';
          nextBtn.style.right = '8px';
          prevBtn.style.top = '50%';
          nextBtn.style.top = '50%';
          counter.style.right = '12px';
          counter.style.bottom = '12px';
        }
      }
    }
  });
  if (modalOverlay) modalOverlay.addEventListener('click', closeModal);
  if (modalClose) modalClose.addEventListener('click', closeModal);
  if (pmPrev) pmPrev.addEventListener('click', prevImage);
  if (pmNext) pmNext.addEventListener('click', nextImage);
  if (pmCover) {
    pmCover.addEventListener('click', (e) => {
      const img = pmCover;
      
      if (img.classList.contains('zoomed')) {
        // When zoomed, handle left/right navigation based on click position
        const rect = img.getBoundingClientRect();
        const clickX = e.clientX - rect.left;
        const imgWidth = rect.width;
        const leftThird = imgWidth / 3;
        const rightThird = (imgWidth * 2) / 3;
        
        if (clickX < leftThird) {
          // Click on left third - go to previous image
          prevImage();
        } else if (clickX > rightThird) {
          // Click on right third - go to next image
          nextImage();
        }
        // Click in middle third - do nothing (or could exit zoom if desired)
      } else {
        // When not zoomed, just enlarge the image
        enlargeImage();
      }
    });
  }
  
  // Container'a tƒ±klayƒ±nca zoom'u kapat ve overview'a ge√ß
  if (pmGalleryContainer) {
    pmGalleryContainer.addEventListener('click', (e) => {
      if (e.target === pmGalleryContainer && pmCover.classList.contains('zoomed')) {
        enlargeImage();
        // Overview kartƒ±na scroll yap
        const overviewSection = document.querySelector('#pm-features').closest('div');
        if (overviewSection) {
          overviewSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
      }
    });
  }
  
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') closeModal();
    if (e.key === 'ArrowLeft') prevImage();
    if (e.key === 'ArrowRight') nextImage();
  });
  // Close when scrolling the page (wheel) outside modal content
  modal.addEventListener('wheel', (e) => { if (shouldCloseOnWheel(e)) closeModal(); }, { passive: true });
}

// 9. Tilt efekt
function activateTiltEffect() {
  const projectCards = document.querySelectorAll('.project-card.visible');
  if (!projectCards.length) return;

  projectCards.forEach(card => {
    card.addEventListener('mousemove', (e) => {
      if (!card.classList.contains('visible')) return;
      
      const rect = card.getBoundingClientRect();
      const x = e.clientX - rect.left;
      const y = e.clientY - rect.top;
      const centerX = rect.width / 2;
      const centerY = rect.height / 2;
      const rotateX = ((y - centerY) / centerY) * -20;
      const rotateY = ((x - centerX) / centerX) * 20;
      card.style.transform = `scale(1) rotateX(${rotateX}deg) rotateY(${rotateY}deg)`;
    });

    card.addEventListener('mouseleave', () => {
      if (!card.classList.contains('visible')) return;
      card.style.transform = 'scale(1) rotateX(0deg) rotateY(0deg)';
    });
  });
}

// 10. Terminal yazƒ±sƒ±
function setupTerminalTyping() {
  const container = document.getElementById("terminal-typing-container");
  const terminal = document.getElementById("terminal-typing");
  if (!container || !terminal) return;

  const lines = [
    "Microsoft Windows [Version 10.0.26100.4061]",
    "(c) Microsoft Corporation. All rights reserved.",
    "",
    "C:\\Users\\sarper> Initializing blog system...",
    "C:\\Users\\sarper> Connecting to GPT-4...",
    "C:\\Users\\sarper> Generating knowledge modules...",
    "C:\\Users\\sarper> Status: ONLINE ‚úÖ"
  ];

  let timeouts = [];

  function clearTimers() {
    timeouts.forEach(id => clearTimeout(id));
    timeouts = [];
  }

  function startTyping() {
    terminal.textContent = "";
    const firstLine = document.createElement("div");
    terminal.appendChild(firstLine);

    let lineIndex = 0;
    let charIndex = 0;
    let currentLine = "";

    function typeNextChar() {
      if (lineIndex >= lines.length) return;

      const line = lines[lineIndex];
      if (charIndex < line.length) {
        currentLine += line.charAt(charIndex++);
        terminal.lastChild.textContent = currentLine;
        // Auto-scroll container to bottom without affecting layout height
        container.scrollTop = container.scrollHeight;
        timeouts.push(setTimeout(typeNextChar, 30));
      } else {
        const br = document.createElement("div");
        br.textContent = "";
        terminal.appendChild(br);
        lineIndex++;
        charIndex = 0;
        currentLine = "";
        container.scrollTop = container.scrollHeight;
        timeouts.push(setTimeout(typeNextChar, 400));
      }
    }

    typeNextChar();
  }

  // Start immediately on load
  startTyping();

  // Restart when blog section comes into view
  const blogSection = document.getElementById("blog");
  if (blogSection && "IntersectionObserver" in window) {
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          clearTimers();
          startTyping();
        }
      });
    }, { threshold: 0.5 });
    observer.observe(blogSection);
  }
}

// About Me section animasyonu
function setupAboutMeAnimations() {
  const aboutSection = document.getElementById('about');
  const aboutTitle = document.getElementById('about-title');
  const aboutText = document.getElementById('about-text');
  const skillsSection = document.getElementById('skills-section');

  if (!aboutSection || !aboutTitle || !aboutText || !skillsSection) return;

  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        // About Me ba≈ülƒ±ƒüƒ± - zoom in
        setTimeout(() => {
          aboutTitle.classList.remove('opacity-0', 'scale-50');
          aboutTitle.classList.add('opacity-100', 'scale-100');
        }, 100);

        // Sol metin - soldan gel
        setTimeout(() => {
          aboutText.classList.remove('opacity-0', 'translate-x-[-100px]');
          aboutText.classList.add('opacity-100', 'translate-x-0');
        }, 300);

        // Saƒü yetenekler - saƒüdan gel
        setTimeout(() => {
          skillsSection.classList.remove('opacity-0', 'translate-x-[100px]');
          skillsSection.classList.add('opacity-100', 'translate-x-0');
        }, 500);
      } else {
        // Scroll dƒ±≈üƒ±na √ßƒ±ktƒ±ƒüƒ±nda animasyonlarƒ± sƒ±fƒ±rla
        aboutTitle.classList.add('opacity-0', 'scale-50');
        aboutTitle.classList.remove('opacity-100', 'scale-100');
        
        aboutText.classList.add('opacity-0', 'translate-x-[-100px]');
        aboutText.classList.remove('opacity-100', 'translate-x-0');
        
        skillsSection.classList.add('opacity-0', 'translate-x-[100px]');
        skillsSection.classList.remove('opacity-100', 'translate-x-0');
      }
    });
  }, { threshold: 0.3 });

  observer.observe(aboutSection);
}

document.addEventListener("DOMContentLoaded", () => {
  setupQuickContactPanel();
  decodeEffect();
  setupScrollRevealAnimations();
  setupSkillAnimation();
  setupSkillIconAnimations();
  setupProjectCardFanout();
  // setupProjectCardOverlay(); // deprecated
  setupProjectModal();
  // initStarField for footer is already called in base.html
  if (typeof initStarField === 'function') {
    const starCanvas = document.getElementById('star-canvas');
    if (starCanvas) initStarField("star-canvas");
    
    // Initialize new star fields
    const aboutStars = document.getElementById('about-stars');
    if (aboutStars) initStarField("about-stars");
    
    const blogStars = document.getElementById('blog-stars');
    if (blogStars) initStarField("blog-stars");
    
    const contactStars = document.getElementById('contact-stars');
    if (contactStars) initStarField("contact-stars");
  }
  setupTerminalTyping();
  setupSmoothScrollWithOffset();
  setupAboutMeAnimations();
});

</script>
{% endblock %}