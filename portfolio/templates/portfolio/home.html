<!-- portfolio/templates/portfolio/home.html -->
{% extends "base.html" %} {% load static %} {% block title %}Home{% endblock %}
{% block content%}
<!-- Floating Panel Area -->
<div
  id="social-panel"
  class="fixed left-0 top-1/4 z-50 flex flex-col items-center space-y-2 bg-gray-300 p-2 rounded-lg transition-all duration-500 dark:bg-zinc-800"
>
  <!-- Toggle Button -->
  <button
    id="toggle-panel"
    class="text-xs text-white font-semibold mt-0 px-2 py-0.5 w-fit leading-tight rounded-md bg-zinc-700 hover:bg-zinc-800 transition duration-300 dark:bg-zinc-600 dark:hover:bg-zinc-700"
  >
    Quick<br />Contact
  </button>
  <!-- Initially hidden -->
  <div
    id="icon-area"
    class="flex flex-col items-center space-y-4 opacity-0 max-h-0 overflow-hidden transition-all duration-700"
  >
    <a
      href="https://www.linkedin.com/in/umut-sarper-uzun"
      target="_blank"
      class="dark:invert dark:brightness-125"
    >
      <img
        src="{% static 'icons/linkedin.svg' %}"
        alt="LinkedIn"
        class="w-6 h-6 max-w-[24px] max-h-[24px] object-contain hover:scale-110 transition-transform duration-300"
      />
    </a>
    <a
      href="https://www.github.com/umutsarperuzun"
      target="_blank"
      class="dark:invert dark:brightness-125"
    >
      <img
        src="{% static 'icons/github.svg' %}"
        alt="GitHub"
        class="w-6 h-6 max-w-[24px] max-h-[24px] object-contain hover:scale-110 transition-transform duration-300"
      />
    </a>
    <a
      href="https://www.instagram.com/srpruzn"
      target="_blank"
      class="dark:invert dark:brightness-125"
    >
      <img
        src="{% static 'icons/instagram.svg' %}"
        alt="Instagram"
        class="w-6 h-6 max-w-[24px] max-h-[24px] object-contain hover:scale-110 transition-transform duration-300"
      />
    </a>
    <a
      href="mailto:sarperuzun1@gmail.com?subject=Let's%20Connect&body=Hello%20Sarper%2C%0AI%20visited%20your%20portfolio%20and%20wanted%20to%20reach%20out."
      target="_blank"
      class="dark:invert dark:brightness-125"
    >
      <img
        src="{% static 'icons/gmail.svg' %}"
        alt="Email"
        class="w-6 h-6 max-w-[24px] max-h-[24px] object-contain hover:scale-110 transition-transform duration-300"
      />
    </a>
  </div>
</div>

<section
  id="home"
  class="relative min-h-screen flex items-center overflow-hidden"
>
  <!-- 1 sector hareketli arka plan -->
  <div
    class="absolute top-0 left-0 w-full h-full z-0 bg-gradient-to-r from-white via-gray-200 to-black bg-[length:200%] animate-slideBg dark:from-gray-900 dark:via-gray-800 dark:to-black"
  ></div>

  <!-- 2 sector Kayan gÃ¶rseller transparan arka planlÄ± -->
  <div
    class="absolute top-[128px] left-0 w-full h-[calc(100vh-128px)] z-10 overflow-hidden bg-transparent"
  >
    <div
      class="fade-mask absolute top-0 left-0 w-full h-full z-10 pointer-events-none"
    ></div>

    <div class="relative w-full h-full">
      <div
        class="slider-track flex animate-marquee h-full px-10 py-16 items-stretch min-w-[200%]"
      >
        {% for img in slider_images %}
        <img
          src="{% static img %}"
          class="h-full w-auto object-cover opacity-20 grayscale contrast-75 dark:opacity-30 dark:grayscale-0 dark:contrast-100"
        />
        {% endfor %}
      </div>
    </div>
  </div>

  <!-- 3 sector decode yazÄ±sÄ± -->
  <div class="relative z-20 text-left px-6 md:px-16">
    <h1 class="text-5xl font-bold text-gray-900 dark:text-gray-100">
      <span id="decoding-title"></span>
    </h1>
  </div>
</section>
<section
  id="about"
  class="min-h-screen bg-gray-100 dark:bg-gray-900 py-20 scroll-mt-32"
>
  <h2 class="text-3xl font-bold text-center text-gray-900 dark:text-white">
    About Me
  </h2>

  <div class="mt-12 grid grid-cols-1 md:grid-cols-2 gap-10 w-full px-16">
    <!-- Sol: YazÄ± -->
    <div data-aos="fade-right" class="text-center max-w-xl mx-auto">
      <h3 class="text-2xl font-bold text-gray-800 dark:text-white mb-4">
        Who am I?
      </h3>
      <p class="text-gray-700 dark:text-gray-300 leading-relaxed">
        I'm a passionate and detail-oriented Junior Software Developer with a
        strong focus on building clean, scalable, and user-friendly web
        applications. With a background in Computer Science (MSc, Distinction),
        I have hands-on experience in both frontend and backend technologies
        including Django, React, Tailwind CSS, and RESTful APIs. I enjoy solving
        real-world problems through code, continuously learning new
        technologies, and working on projects that make a meaningful impact.
      </p>
    </div>

    <!-- SaÄŸ: Yetenekler -->
    <div
      id="skills-section"
      data-aos="fade-left"
      class="grid grid-cols-1 md:grid-cols-3 gap-8"
    >
      <!-- Backend -->
      <div class="space-y-4">
        <h4 class="text-xl font-semibold text-gray-700 dark:text-white">
          Backend
        </h4>
        <!-- Python -->
        {% include "portfolio/components/skill_item.html" with icon="icons/python.svg" name="Python" percentage="90" color="blue" %}
        <!-- Flask -->
         {% include "portfolio/components/skill_item.html" with icon="icons/flask.svg" name="Flask" percentage="80" color="emerald" %}
        <!-- MySQL -->
        {% include "portfolio/components/skill_item.html" with icon="icons/mysql.svg" name="MySQL" percentage="80" color="emerald" %}
        <!-- Node.js -->
        {% include "portfolio/components/skill_item.html" with icon="icons/node.svg" name="Node.js (Express.js)" percentage="70" color="emerald" %}
        <!-- Django -->
        {% include "portfolio/components/skill_item.html" with icon="icons/django.svg" name="Django" percentage="70" color="emerald" %}
      </div>
      <!-- Frontend -->
      <div class="space-y-4">
        <h4 class="text-xl font-semibold text-gray-700 dark:text-white">Frontend</h4>
        <!-- JavaScript -->
        {% include "portfolio/components/skill_item.html" with icon="icons/javascript.svg" name="JavaScript" percentage="85" color="yellow" %}
        <!-- React -->
        {% include "portfolio/components/skill_item.html" with icon="icons/react.svg" name="React" percentage="70" color="sky" %}
        <!-- Tailwind CSS -->
        {% include "portfolio/components/skill_item.html" with icon="icons/css.svg" name="CSS / Tailwind CSS" percentage="75" color="cyan" %}
        <!-- HTML -->
        {% include "portfolio/components/skill_item.html" with icon="icons/html.svg" name="HTML5" percentage="75" color="cyan" %}
      </div>
      <!-- Tools & Others -->
      <div class="space-y-4">
        <h4 class="text-xl font-semibold text-gray-700 dark:text-white">Tools & Others</h4>
        <!-- Git & GitHub -->
        {% include "portfolio/components/skill_item.html" with icon="icons/git.svg" name="Git & GitHub" percentage="85" color="orange" %}
        <!-- Docker -->
        {% include "portfolio/components/skill_item.html" with icon="icons/docker.svg" name="Docker" percentage="60" color="blue" %}
        <!-- Postman -->
        {% include "portfolio/components/skill_item.html" with icon="icons/postman.svg" name="Postman" percentage="75" color="orange" %}
        <!-- n8n -->
        {% include "portfolio/components/skill_item.html" with icon="icons/n8n.svg" name="n8n" percentage="65" color="orange" %}
      </div>
    </div>
  </div>
</section>
<section
  id="projects"
  class="relative bg-gray-100 dark:bg-gray-900 scroll-mt-32 pt-24 pb-10"
>

  <!-- Arka plan yÄ±ldÄ±zlar -->
  <canvas id="star-canvas" class="absolute inset-0 w-full h-full z-0 pointer-events-none"></canvas>

  <!-- Explore Projects AlanÄ± -->
<div
  id="project-trigger"
  class="flex justify-center items-center transition-all duration-700 relative z-10"
>



    <div
      id="main-project-card"
      class="bg-white dark:bg-zinc-800 shadow-lg rounded-2xl px-12 py-20 text-center text-3xl font-bold text-gray-900 dark:text-white transition-transform duration-500 cursor-pointer hover:scale-105 hover:shadow-2xl hover:bg-gradient-to-r hover:from-indigo-500 hover:to-purple-500 dark:hover:brightness-110"
    >
      ðŸš€ Explore Projects
    </div>
  </div>

  <!-- BaÅŸlÄ±k -->
  <h2 id="project-heading" class="text-3xl font-bold text-center text-gray-900 dark:text-white opacity-0 transition-opacity duration-700 mb-2 md:mb-8">
    Projects
  </h2>

  <!-- Kartlar -->
  <div class="max-w-6xl mx-auto">
    <div
  id="project-fanout"
  class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-6 px-4"
>

<div class="project-card"
     data-title="Huge Title 1"
     data-description="Huge Description 1.">
  <div class="project-card-inner">
    <h3 class="text-xl font-semibold">Proje 1</h3>
    <p class="text-sm mt-2">Short Information 1</p>
  </div>
  <button class="card-close">âœ–</button>
</div>




<div class="project-card"
     data-title="Huge Title 2"
     data-description="Huge Description 2.">
  <div class="project-card-inner">
    <h3 class="text-xl font-semibold">Proje 2</h3>
    <p class="text-sm mt-2">Short Information 2</p>
  </div>
  <button class="card-close">âœ–</button>
</div>



<div class="project-card"
     data-title="Huge Title 3"
     data-description="Huge Description 3.">
  <div class="project-card-inner">
    <h3 class="text-xl font-semibold">Proje 3</h3>
    <p class="text-sm mt-2">Short Information 3</p>
  </div>
  <button class="card-close">âœ–</button>
</div>



<div class="project-card"
     data-title="Huge Title 4"
     data-description="Huge Description 4.">
  <div class="project-card-inner">
    <h3 class="text-xl font-semibold">Proje 4</h3>
    <p class="text-sm mt-2">Short Information 4</p>
  </div>
  <button class="card-close">âœ–</button>
</div>



<div class="project-card"
     data-title="Huge Title 5"
     data-description="Huge Description 5.">
  <div class="project-card-inner">
    <h3 class="text-xl font-semibold">Proje 5</h3>
    <p class="text-sm mt-2">Short Information 5</p>
  </div>
  <button class="card-close">âœ–</button>
</div>


    </div>
  </div>
  <!-- Blur Arkaplan -->
<div id="overlay-blur" class="fixed inset-0 bg-black/30 backdrop-blur-sm z-40 hidden"></div>


</section>

<section
  id="blog"
  class="min-h-screen bg-gray-100 dark:bg-gray-900 py-20 scroll-mt-16"
>
  <div class="reveal-manual will-change-transform" data-section="blog">
    <h2 class="text-3xl font-bold text-center text-gray-900 dark:text-white">
      Blog
    </h2>
    <p
      class="text-center mt-4 max-w-xl mx-auto text-gray-800 dark:text-gray-300"
    >
      I'm a passionate and detail-oriented Junior Software Developer with a
      strong focus on building clean, scalable, and user-friendly web
      applications. With a background in Computer Science (MSc, Distinction), I
      have hands-on experience in both frontend and backend technologies
      including Django, React, Tailwind CSS, and RESTful APIs. My projects range
      from AI-powered chatbots and fleet management tools to e-commerce
      dashboards and weather apps. I enjoy solving real-world problems through
      code, continuously learning new technologies, and working on projects that
      make a meaningful impact. Currently, Iâ€™m focused on enhancing my skills in
      Django, Tailwind CSS, and JavaScript by building this portfolio from
      scratch â€” combining technical depth with aesthetic polish. Letâ€™s build
      something meaningful together.
    </p>
  </div>
</section>

<section
  id="contact"
  class="h-auto bg-white dark:bg-gray-900 py-20 transition-colors duration-500 scroll-mt-40"
>
  <div
    data-aos="fade-up"
    data-aos-duration="1200"
    data-aos-easing="ease-out-cubic"
    class="bg-transparent"
  >
    <h2 class="text-3xl font-bold text-center mb-4 dark:text-white">Contact</h2>
    <p
      class="text-center mt-4 max-w-xl mx-auto text-gray-700 dark:text-gray-300 text-lg leading-relaxed"
    >
      I'm a passionate and detail-oriented Junior Software Developer with a
      strong focus on building clean, scalable, and user-friendly web
      applications. With a background in Computer Science (MSc, Distinction), I
      have hands-on experience in both frontend and backend technologies
      including Django, React, Tailwind CSS, and RESTful APIs. My projects range
      from AI-powered chatbots and fleet management tools to e-commerce
      dashboards and weather apps. I enjoy solving real-world problems through
      code, continuously learning new technologies, and working on projects that
      make a meaningful impact. Currently, Iâ€™m focused on enhancing my skills in
      Django, Tailwind CSS, and JavaScript by building this portfolio from
      scratch â€” combining technical depth with aesthetic polish. Letâ€™s build
      something meaningful together.
    </p>
  </div>
</section>

<!-- Quick Contact tags on the left-side -->
<script>
  const contactToggleBtn = document.getElementById("toggle-panel");
  const iconSection = document.getElementById("icon-area");

  let panelOpen = false;
  contactToggleBtn.addEventListener("click", () => {
    iconSection.classList.toggle("opacity-0");
    iconSection.classList.toggle("max-h-0");
    iconSection.classList.toggle("max-h-[500px]");
    panelOpen = !panelOpen; //Panel situation checking
  });

  window.addEventListener("scroll", () => {
    if (panelOpen) {
      //if panel is open
      iconSection.classList.add("opacity-0");
      iconSection.classList.add("max-h-0");
      iconSection.classList.remove("max-h-[500px]");
      panelOpen = false;
    }
  });
</script>
<!-- decode section in header -->
<script>
  const targetText = "This is my portfolio";
  const characters =
    "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz1234567890!@#$%^&*()-_=+";
  const display = document.getElementById("decoding-title");
  let iterations = 0;

  function decodeEffect() {
    const length = targetText.length;
    let output = "";

    for (let i = 0; i < length; i++) {
      if (i < iterations) {
        output += targetText[i];
      } else {
        output += characters[Math.floor(Math.random() * characters.length)];
      }
    }

    display.textContent = output;

    if (iterations <= length) {
      iterations++;
      setTimeout(decodeEffect, 60); // animation speed control
    } else {
      //for cycle each 5 sec
      setTimeout(() => {
        iterations = 0;
        decodeEffect();
      }, 2000);
    }
  }
  document.addEventListener("DOMContentLoaded", decodeEffect);
</script>

<!-- Projects & Blog section animation with vanilla.js -->
<script>
  const sections = document.querySelectorAll(".reveal-manual");
  let lastScrollY = window.scrollY; // ilk scroll pozisyonu

  const observer = new IntersectionObserver(
    (entries) => {
      entries.forEach((entry) => {
        const currentScrollY = window.scrollY;
        const scrollingDown = currentScrollY > lastScrollY;

        if (entry.isIntersecting && scrollingDown) {
          const sectionName = entry.target.dataset.section;
          // sadece aÅŸaÄŸÄ± inerken animasyonu uygula
          if (sectionName === "projects") {
            entry.target.classList.add("animate-slide-in");
          } else if (sectionName === "blog") {
            entry.target.classList.add("animate-slide-left");
          }
        }

        if (!entry.isIntersecting) {
          // yeniden animasyon oynatmak iÃ§in class'larÄ± kaldÄ±r
          entry.target.classList.remove("animate-slide-in");
          entry.target.classList.remove("animate-slide-left");
        }

        // scroll pozisyonunu gÃ¼ncelle
        lastScrollY = currentScrollY;
      });
    },
    {
      threshold: 0.05, // %5'i gÃ¶rÃ¼nÃ¼r olunca tetiklensin
    }
  );

  sections.forEach((section) => {
    observer.observe(section);
  });
</script>
<script>
  const skillSection = document.getElementById("skills-section");
  const skillBars = document.querySelectorAll(".skill-bar");
  let animationStarted = false;
  let skillInterval;

  function animateSkills() {
    skillBars.forEach((bar) => {
      bar.style.transition = "none"; // animasyonu geÃ§ici kapat
      bar.style.width = "0%"; // sÄ±fÄ±rla
    });

    // TarayÄ±cÄ±nÄ±n 0%'Ä± iÅŸlemesine fÄ±rsat vermek iÃ§in kÃ¼Ã§Ã¼k gecikme
    setTimeout(() => {
      skillBars.forEach((bar, index) => {
        setTimeout(() => {
          const targetWidth = bar.getAttribute("data-width");
          bar.style.transition = "width 1.5s ease";
          bar.style.width = targetWidth;
        }, index * 150);
      });
    }, 50); // 50ms gecikme sayesinde animasyon dÃ¼zgÃ¼n baÅŸlar
  }

  const observering = new IntersectionObserver(
    (entries, observering) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting && !animationStarted) {
          animationStarted = true;
          animateSkills();

          // Her 10 saniyede bir tekrar et
          skillInterval = setInterval(() => {
            animateSkills();
          }, 10000);

          observering.unobserve(entry.target);
        }
      });
    },
    {
      threshold: 0.3,
    }
  );

  observering.observe(skillSection);
</script>

<!-- Icons animations -->
<script>
const icons = document.querySelectorAll(".skill-icon");

const iconObserver = new IntersectionObserver((entries) => {
  entries.forEach(entry => {
    if (entry.isIntersecting) {
      const icon = entry.target;
      
      // Class'Ä± resetleyip yeniden ekle
      icon.classList.remove("animate-spin-once");
      void icon.offsetWidth; // reflow hilesi
      icon.classList.add("animate-spin-once");
    }
  });
}, { threshold: 0.6 });

icons.forEach(icon => iconObserver.observe(icon));

</script>
<script>
const trigger = document.getElementById('project-trigger');
const mainCard = document.getElementById('main-project-card');
const fanout = document.getElementById('project-fanout');
const heading = document.getElementById('project-heading');
const cards = document.querySelectorAll('.project-card');
const canvas = document.getElementById("star-canvas");
const ctx = canvas.getContext("2d");

let opened = false;
let stars = [];

// â­ YÄ±ldÄ±z animasyonu
function initStarField() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;

  stars = Array.from({ length: 100 }, () => ({
    x: Math.random() * canvas.width,
    y: Math.random() * canvas.height,
    radius: Math.random() * 1.5,
    speed: 0.3 + Math.random() * 0.5,
  }));

  drawStars();
}

function drawStars() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  const isDark = document.documentElement.getAttribute("data-theme") === "dark";
  ctx.fillStyle = isDark ? "white" : "#111"; // Light modda yÄ±ldÄ±zlar koyu olur

  stars.forEach((star) => {
    ctx.beginPath();
    ctx.arc(star.x, star.y, star.radius, 0, Math.PI * 2);
    ctx.fill();
    star.y += star.speed;
    if (star.y > canvas.height) {
      star.y = 0;
      star.x = Math.random() * canvas.width;
    }
  });

  requestAnimationFrame(drawStars);
}

// YÄ±ldÄ±zlar her zaman Ã§alÄ±ÅŸsÄ±n
document.addEventListener("DOMContentLoaded", initStarField);

// Kart tÄ±klanma olayÄ±
mainCard.addEventListener('click', () => {
  if (opened) return;

  const offsetTop = document.getElementById("projects").offsetTop;
  const navbarHeight = document.querySelector("nav").offsetHeight;

  window.scrollTo({
    top: offsetTop - navbarHeight - 12 ,
    behavior: "smooth"
  });


  // Explore kartÄ± gizle
  trigger.classList.add('opacity-0', 'pointer-events-none', 'hidden');
  trigger.classList.remove('h-[300px]');

  // BaÅŸlÄ±k ve kartlarÄ± gÃ¶ster
  heading.classList.remove('opacity-0');
  fanout.classList.add('active');
  cards.forEach((card, index) => {
    setTimeout(() => {
      card.classList.remove('hidden');
      card.style.opacity = "1";
      card.style.transform = "scale(1)";
    }, 150 * index);
  });

  opened = true;
});

// Scroll ile geri gelince sÄ±fÄ±rlama
const obsrvr = new IntersectionObserver((entries) => {
  entries.forEach(entry => {
    if (!entry.isIntersecting && opened) {
      trigger.classList.remove('opacity-0', 'pointer-events-none', 'hidden');
      trigger.classList.add('h-[300px]');

      heading.classList.add('opacity-0');
      fanout.classList.add('opacity-0');
      fanout.classList.remove('active');

      cards.forEach(card => {
        card.classList.add('hidden');
        card.style.opacity = "0";
        card.style.transform = "scale(0.9)";
      });

      opened = false;
    }
  });
}, { threshold: 0.3 });

obsrvr.observe(document.getElementById('projects'));
</script>

<script>
  function activateTiltEffect() {
    console.log("ðŸŽ¯ Tilt effect baÅŸlatÄ±ldÄ±");
    const projectCards = document.querySelectorAll('.project-card');

    projectCards.forEach(card => {
      card.addEventListener('mousemove', (e) => {
        const rect = card.getBoundingClientRect();
        const x = e.clientX - rect.left;
        const y = e.clientY - rect.top;
        const centerX = rect.width / 2;
        const centerY = rect.height / 2;

        const rotateX = ((y - centerY) / centerY) * -20;
        const rotateY = ((x - centerX) / centerX) * 20;

        card.style.transform = `rotateX(${rotateX}deg) rotateY(${rotateY}deg)`;
      });

      card.addEventListener('mouseleave', () => {
        card.style.transform = 'rotateX(0deg) rotateY(0deg)';
      });
    });
  }

  document.addEventListener("DOMContentLoaded", () => {
    console.log("ðŸ’¡ JS baÅŸlatÄ±ldÄ±");

    const mainCard = document.getElementById('main-project-card');
    const trigger = document.getElementById('project-trigger');
    const heading = document.getElementById('project-heading');
    const fanout = document.getElementById('project-fanout');
    const cards = document.querySelectorAll('.project-card');
    let opened = false;

    mainCard.addEventListener('click', () => {
      if (opened) return;

      const offsetTop = document.getElementById("projects").offsetTop;
      const navbarHeight = document.querySelector("nav").offsetHeight;

      window.scrollTo({
        top: offsetTop - navbarHeight - 12,
        behavior: "smooth"
      });

      // KartlarÄ± aÃ§
      trigger.classList.add('opacity-0', 'pointer-events-none', 'hidden');
      heading.classList.remove('opacity-0');
      fanout.classList.remove('opacity-0');

      cards.forEach((card, index) => {
        setTimeout(() => {
          card.classList.remove('hidden');
          card.style.opacity = "1";
          card.style.transform = "scale(1)";
        }, 150 * index);
      });

      // âœ¨ Tilt effect burada baÅŸlatÄ±lÄ±yor
      activateTiltEffect();
      opened = true;
    });
  });
</script>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const cards = document.querySelectorAll(".project-card");
    const overlay = document.getElementById("overlay-blur");

    // YardÄ±mcÄ± fonksiyonlar
    const resetCard = (card) => {
      card.classList.remove("active");
      const title = card.querySelector("h3");
      const desc = card.querySelector("p");
      title.textContent = card.dataset.originalTitle || "";
      desc.textContent = card.dataset.originalDesc || "";
    };

    // Kart gÃ¶zden Ã§Ä±karsa overlay kaldÄ±r
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (!entry.isIntersecting && entry.target.classList.contains("active")) {
          resetCard(entry.target);
          overlay.classList.add("hidden");
        }
      });
    }, { threshold: 0.2 });

    // Scroll ile tÃ¼m kartlar kapanÄ±nca overlay'i kaldÄ±r
    const blurResetObserver = new IntersectionObserver((entries) => {
      const anyActive = Array.from(cards).some(card => card.classList.contains("active"));
      const allInvisible = Array.from(entries).every(entry => !entry.isIntersecting);

      if (anyActive && allInvisible) {
        cards.forEach(resetCard);
        overlay.classList.add("hidden");
      }
    }, { threshold: 0.2 });

    // Kartlara olaylarÄ± baÄŸla
    cards.forEach(card => {
      const closeBtn = card.querySelector(".card-close");
      const title = card.querySelector("h3");
      const desc = card.querySelector("p");

      // Orijinal metinleri sakla
      card.dataset.originalTitle = title.textContent;
      card.dataset.originalDesc = desc.textContent;

      // Kart tÄ±klanÄ±nca detaylÄ± iÃ§eriÄŸe geÃ§
      card.addEventListener("click", () => {
        card.classList.add("active");
        overlay.classList.remove("hidden");
        const detailTitle = card.getAttribute("data-title");
        const detailDesc = card.getAttribute("data-description");
        if (detailTitle) title.textContent = detailTitle;
        if (detailDesc) desc.textContent = detailDesc;
      });

      // Kapatma butonu
      if (closeBtn) {
        closeBtn.addEventListener("click", (e) => {
          e.stopPropagation();
          resetCard(card);
          overlay.classList.add("hidden");
        });
      }

      observer.observe(card);
      blurResetObserver.observe(card);
    });

    // Overlay'e tÄ±klanÄ±rsa tÃ¼m kartlarÄ± kapat
    overlay.addEventListener("click", () => {
      document.querySelectorAll(".project-card.active").forEach(resetCard);
      overlay.classList.add("hidden");
    });
  });
</script>





{% endblock %}